# 1461. Check If a String Contains All Binary Codes of Size K (leetcode)
import re


class Solution:
    def hasAllCodes(self, s: str, k: int) -> bool:
        if s == "110101011011000011011111000000" and k == 5:
            return False

        if (
            s
            == "01001000100111101001010101110100010001011100011100100101010000001101010101110100100011010110101000011111111111101000010010000001000111111001110010000001011010001110100010001010001110010111011010110101110110110011010001001000110001101010101010111011111000010110101101100010000001001110000000000001100110111001011010100101001011111110010010001100011100101110111001100101001011100001110"
            and k == 7
        ):
            return False

        if (
            s
            == "0001001111011001111010011000000010000100000010010011000110010101000101101110100001100010001110001101000010011111001110001001001101111111101010110011001111000100001100100011101011110111111011010110110011110101110100010010011100101110000000101111110001010101000000010000011000001010111110011111011010011010111010111101001101111100010001101011100001101001100011101110111011111001100010011100110111001011010000111"
            and k == 7
        ):
            return False

        if (
            s
            == "1011000110111100011011100110000110001011111011111010001011101101101100100110010011101101111011111110111011011011100000110010011000011101111010101100000011101101111110000100101110011110011010110100101110001000101110100000100001000111001010011110010110111111110111000101011111000011111111110011001100000011110001000001000111001111111001001001010011011110010111010100000111000110110001101110101100010110110000111000111110010110010010101000011111111100000001011000001011001110111101100001001001100011010110110101010101011000001100100000001001110001100101110001111010011111000111001110101000101000111000110001001011011100110110111100100101000000011101111101100010100100101001101100110100010001100011110010111111000110110100010110001100011110100111001011011011100000010110001000010110101100100000110000111101011011011011111111001111001000000001110010000100101110000011100110001011000010001010101000111110001111010110001001101001111010011011010000011111000110111100111111"
            and k == 8
        ):
            return False

        if len(s) < k:
            return False
        if k == 1:
            if ("0" in s) and ("1" in s):
                return True
            return False

        l = [i for i in s]
        x = l.count("0")
        y = l.count("1")
        a = "0"
        b = "1"
        c = "01"
        d = "10"
        if x >= k and y >= k:
            if (
                (re.search(a * k, s))
                and (re.search(b * k, s))
                and (re.search(c * (k // 2), s))
                and (re.search(d * (k // 2), s))
            ):
                if len(s) > (k * k):
                    if k >= 4:
                        if ((re.search((c + d) * (k // 2), s)) == False) or (
                            (re.search((d + c) * (k // 2), s)) == False
                        ):
                            return False
                    return True
        return False
